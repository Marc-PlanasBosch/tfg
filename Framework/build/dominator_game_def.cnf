# Definició del joc Dominator en format genèric
# Aquest fitxer defineix les regles, tipus d'unitats, mecàniques del joc i funcions disponibles per a les IAs

[GAME]
game_name=Dominator
version=4.0
max_players=4
default_rounds=200
default_rows=37
default_cols=37

[UNIT_TYPES]
# Format: name symbol max_health initial_health regen_rate movement_range attack_range attack_power defense can_capture can_move can_attack [abilities...]
Farmer f 100 100 30 1 1 0 0 1 1 0
Knight k 200 200 30 1 1 75 0 0 1 1
Witch w 100 100 0 1 2 0 0 0 1 0 spell_haunt

[RULES]
# Format: name type [param1=value1 param2=value2 ...]
capture_territory territory_control capture_range=1 capture_points=10
unit_combat combat damage_min=60 damage_max=90
witch_haunting special_effect range=2 duration=3

[MECHANICS]
# Format: name description [ability1 ability2 ...] [param1=value1 param2=value2 ...]
territory_control "Els farmers poden capturar territori movent-se a cel·les buides" Farmer can_capture=1
combat_system "Els knights poden atacar unitats enemigues" Knight can_attack=1 attack_range=1
haunting_system "Les witches poden embruixar cel·les per afectar unitats enemigues" Witch spell_haunt=1

[AI_FUNCTIONS]
# Funcions de consulta que pot utilitzar una IA
# Format: function_name return_type [param1=type1 param2=type2 ...] description
farmers "vector<int>" "player_id=int" "Retorna llista d'IDs de farmers d'un jugador"
knights "vector<int>" "player_id=int" "Retorna llista d'IDs de knights d'un jugador"
witches "vector<int>" "player_id=int" "Retorna llista d'IDs de witches d'un jugador"
unit "Unit" "unit_id=int" "Retorna informació d'una unitat específica"
cell "Cell" "pos=Pos" "Retorna contingut d'una cel·la"
cell "Cell" "x=int y=int" "Retorna contingut d'una cel·la per coordenades"
status "double" "player_id=int" "Retorna estat d'un jugador (0.0-1.0)"
total_score "int" "player_id=int" "Retorna puntuació total d'un jugador"
land "int" "player_id=int" "Retorna quantitat de terra d'un jugador"
round "int" "" "Retorna ronda actual"
nb_players "int" "" "Retorna nombre de jugadors"
nb_units "int" "" "Retorna nombre total d'unitats"
nb_farmers "int" "player_id=int" "Retorna nombre de farmers d'un jugador"
nb_knights "int" "player_id=int" "Retorna nombre de knights d'un jugador"
nb_witches "int" "player_id=int" "Retorna nombre de witches d'un jugador"

[AI_ACTIONS]
# Accions que pot realitzar una IA
# Format: action_name [param1=type1 param2=type2 ...] description
command "unit_id=int direction=Dir" "Mou una unitat en una direcció"
attack "attacker_id=int target_id=int" "Ataca una unitat enemiga"
capture "unit_id=int" "Captura territori amb una unitat"

[AI_UTILITIES]
# Funcions d'utilitat per a les IAs
# Format: function_name return_type [param1=type1 param2=type2 ...] description
random "int" "min=int max=int" "Genera número aleatori entre min i max"
random_permutation "vector<int>" "n=int" "Genera permutació aleatòria de 0 a n-1"
pos_ok "bool" "pos=Pos" "Verifica si una posició és vàlida"
pos_ok "bool" "x=int y=int" "Verifica si una posició és vàlida per coordenades"

[FUNCTION_MAPPINGS]
# Mapeig de funcions de l'IA a funcions del framework
# Format: ai_function_name = framework_function_name [param_mapping...]
farmers = getUnitsByTypeAndPlayer "type=Farmer player_id=player_id"
knights = getUnitsByTypeAndPlayer "type=Knight player_id=player_id"
witches = getUnitsByTypeAndPlayer "type=Witch player_id=player_id"
unit = getUnitInfo "unit_id=unit_id"
cell = getCellContent "x=pos.i y=pos.j"
cell = getCellContent "x=x y=y"
status = getPlayerStatus "player_id=player_id"
total_score = getPlayerScore "player_id=player_id"
land = getPlayerLand "player_id=player_id"
round = getCurrentRound ""
nb_players = getNbPlayers ""
nb_units = getNbUnits ""
nb_farmers = getNbUnitsByTypeAndPlayer "type=Farmer player_id=player_id"
nb_knights = getNbUnitsByTypeAndPlayer "type=Knight player_id=player_id"
nb_witches = getNbUnitsByTypeAndPlayer "type=Witch player_id=player_id"
command = executeMove "unit_id=unit_id direction=direction"
attack = executeAttack "attacker_id=attacker_id target_id=target_id"
capture = executeCapture "unit_id=unit_id"
random = generateRandom "min=min max=max"
random_permutation = generateRandomPermutation "n=n"
pos_ok = isValidPosition "x=pos.i y=pos.j"
pos_ok = isValidPosition "x=x y=y"

[CONSTANTS]
# Constants específiques del joc
damage_min=60
damage_max=90
farmers_health=100
knights_health=200
witches_health=100
farmers_regen=30
knights_regen=30
witches_regen=0
